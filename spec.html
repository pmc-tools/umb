<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>The Unified Model Binary Format</title>

		<link href="./_app/immutable/assets/0.CTWn1aWY.css" rel="stylesheet">
		<link href="./_app/immutable/assets/3.B4VbeAUn.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.YitcgU9W.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/hjUjaVub.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Dwu8Ck43.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CLTqvKWG.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/D0iwhpLH.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CrGcBvKj.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/BgPb-EuE.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.BJPbCFXA.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/BQo6OqOv.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/EdPZLQ7C.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Bq0eJJNz.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/DOarqXuo.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/DajOXZ9i.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Bkgstq1j.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/BPc-ykxE.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.B5OrwuZW.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CCN1Y69L.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CP9jtjPq.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CzNagXiF.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/C4tcWgQn.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CYekDBCk.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/3.Cejn-z6F.js"><!--12qhfyh--><link rel="stylesheet" href="styles.css"/> <link rel="icon" href="/_app/immutable/assets/favicon.DWX4Q9z0.svg"/><!----><!--jot9ci--><meta property="og:type" content="article"/> <meta property="og:title" content="Specification of the UMB Format"/><!----><title>Specification of the UMB Format</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><nav class="svelte-11lpkcp"><div class="inner svelte-11lpkcp"><div id="logo-container" class="svelte-11lpkcp"><img src="logo_flat.svg" height="30px" id="logo-icon" class="svelte-11lpkcp"/><a id="logo" href="/umb" class="svelte-11lpkcp">UMB</a></div> <div class="mobile-icon svelte-11lpkcp"><div class="middle-line svelte-11lpkcp"></div></div> <ul class="navbar-list svelte-11lpkcp"><li id="logo-mobile" class="svelte-11lpkcp"><a href="/umb" class="svelte-11lpkcp">Home</a></li> <!--[--><li class="svelte-11lpkcp"><a href="umbi" class="svelte-11lpkcp">UMBI</a></li><li class="svelte-11lpkcp"><a href="tools" class="svelte-11lpkcp">Tools</a></li><li class="svelte-11lpkcp"><a href="observatory" class="svelte-11lpkcp">Observatory</a></li><li class="svelte-11lpkcp"><a href="spec" class="svelte-11lpkcp">Standard</a></li><!--]--></ul></div></nav><!----> <!----><div class="content"><article class="svelte-jot9ci"><hgroup><p class="date svelte-jot9ci">Last updated on 01/26/2026</p></hgroup> <div class="prose"><!----><h1>Specification of the UMB Format</h1> <p>Models specified in the UMB (“unified Markov binary”) format consist of a folder structure containing a set of files with well-defined names (containing characters <code>[a-z][0-9][-_]</code> plus a single <code>.</code> only) in well-defined locations. For transporting models, that folder structure is bundled in a tar file that is optionally compressed using gzip or xz. The file extension for both compressed and uncompressed tar files of this format is <code>.umb</code>. Tools can look at the magic bytes at the beginning of the file to detect the format: big-endian <code>75 73 74 61 72</code> at offset 257 for POSIX tar, <code>1F 8B 08</code> for gzip or <code>FD 37 7A 58 5A 00</code> for xz.</p> <p>A detailed description of the individual files follows below. Overall, there is one central <code>index.json</code> file, which provides all metadata relevant for the model, e.g., its type, statistics regarding its size and what other information is attached (such as rewards, atomic propositions or state valuations). The file also acts an index for the binary files that make up the rest of the tar file.</p> <hr/> <h2>Index (JSON)</h2> <p><code>/index.json</code> (mandatory)</p> <p>This file should be the first entry in the tar file.  It is a UTF-8 encoded JSON file whose contents follow the <code>IndexFile</code> schema, specified in a format similar to <a href="https://github.com/molnarg/js-schema" rel="nofollow">js-schema</a> here:</p> <pre class="language-javascript"><!----><code class="language-javascript"><span class="token keyword">var</span> IndexFile <span class="token operator">=</span> <span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token string">"format-version"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// major version of format, change breaks compatibility</span>
  <span class="token string">"format-revision"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// minor version of format, nothing that breaks compatibility (additions and such)</span>

  <span class="token comment">// Model metadata  </span>
  <span class="token string">"?model-data"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// information about the model that this file represents  </span>
    <span class="token string">"?name"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// the (short) name of the model  </span>
    <span class="token string">"?version"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// information about the version of this model (e.g. the date when it was last modified)  </span>
    <span class="token string">"?authors"</span><span class="token operator">:</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// information about the creator of the model      </span>
    <span class="token string">"?description"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// a description of the model  </span>
    <span class="token string">"?comment"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// additional comments  </span>
    <span class="token string">"?doi"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// the DOI of the paper where this model was introduced/used/described   </span>
    <span class="token string">"?url"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// a URL pointing to more information about the model  </span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">// File metadata  </span>
  <span class="token string">"?file-data"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// information about how this file was created (for reproducibility purposes)  </span>
    <span class="token string">"?tool"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// the tool used to create this model (strongly encouraged)  </span>
    <span class="token string">"?tool-version"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// the tool's version  </span>
    <span class="token string">"?creation-date"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">64</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// export date ([Unix timestamp](https://en.wikipedia.org/wiki/Unix_time))  </span>
    <span class="token string">"?parameters"</span><span class="token operator">:</span> Any <span class="token comment">// the tool parameters (e.g. string or list of command-line arguments) used  </span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token string">"transition-system"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// LTS:   discrete-time   1-player  branch probability type absent  </span>
    <span class="token comment">// DTMC:  discrete-time   0-player  </span>
    <span class="token comment">// MDP:   discrete-time   1-player  </span>
    <span class="token comment">// CTMC:  stochastic-time 0-player  </span>
    <span class="token comment">// MA:    urgent-st.-time 1-player  </span>
    <span class="token comment">// CTMDP: stochastic-time 1-player  </span>
    <span class="token comment">// POMDP: discrete-time   1-player  #observations > 0  </span>
    <span class="token comment">// TG:    discrete-time   n-player  branch probability type absent  </span>
    <span class="token comment">// TSG:   discrete-time   n-player  </span>
    <span class="token comment">// Add "I" in front of acronym to make probabilities=interval-probabilistic  </span>
    <span class="token comment">// Excluded for being symbolic: TA, HA, PTA, PHA, STA, SHA  </span>
    <span class="token comment">// Excluded for having complicated actions: CSG  </span>
    <span class="token comment">// Both of the above: We know how to add  </span>
    <span class="token string">"time"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"discrete"</span><span class="token punctuation">,</span> <span class="token string">"stochastic"</span><span class="token punctuation">,</span> <span class="token string">"urgent-stochastic"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"#players"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 0: DTMC or CTMC, 1: LTS, MDP or MA, more: TSG  </span>
    <span class="token string">"#states"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">64</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of states  </span>
    <span class="token string">"#initial-states"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">64</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of initial states  </span>
    <span class="token string">"#choices"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">64</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of choices  </span>
    <span class="token string">"#choice-actions"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of choice actions (not all have to be used)</span>
    <span class="token string">"#branches"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">64</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of branches  </span>
    <span class="token string">"#branch-actions"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of branch actions (not all have to be used)  </span>
    <span class="token string">"#observations"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">64</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of observation indices (0 means no observations)  </span>
    <span class="token string">"?observations-apply-to"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"states"</span><span class="token punctuation">,</span> <span class="token string">"branches"</span> <span class="token punctuation">]</span> <span class="token comment">// must be present iff #observations is non-zero</span>

    <span class="token comment">// The types in branch-probability-type, exit-rate-type, and observation-probability-type must be continuous numeric types, and must be of the default size (given explicitly as the value for size or implicitly by omitting size) except for types "rational" and "rational-interval", for which the size must be a positive multiple of 128 and 256, respectively  </span>
    <span class="token string">"?branch-probability-type"</span><span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token comment">// must be present iff system has probabilities (e.g. DTMC, MDP)  </span>
    <span class="token string">"?exit-rate-type"</span><span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token comment">// must be present iff system has exit rates (e.g. CTMC, MA)  </span>
    <span class="token string">"?observation-probability-type"</span><span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token comment">// must be present iff the system has observations (i.e. #observations is not 0) and they are not deterministic</span>

    <span class="token string">"?player-names"</span><span class="token operator">:</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token comment">// must be of length #players if present; can be omitted if #players is less than 2; names must be unique  </span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token string">"?annotations"</span><span class="token operator">:</span> <span class="token function">schema</span><span class="token punctuation">(</span>Map<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span> <span class="token comment">// Keys:  </span>
      <span class="token string">"rewards"</span><span class="token punctuation">,</span> <span class="token comment">// rewards (must have continuous numeric type), stored in /annotations/rewards/&lt;identifier>/  </span>
      <span class="token string">"aps"</span><span class="token punctuation">,</span> <span class="token comment">// atomic propositions (must apply to states only and be of type bool), stored in /annotations/aps/&lt;identifier>/  </span>
      <span class="token regex">/[0-9a-z_-]+/</span> <span class="token comment">// stored in /annotations/&lt;key>/&lt;identifier>/  </span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    AnnotationMap <span class="token comment">// values  </span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token string">"?valuations"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">// for each annotated entity, we specify a list of valuation classes  </span>
    <span class="token string">"?states"</span><span class="token operator">:</span> ValuationDescription<span class="token punctuation">,</span>
    <span class="token string">"?choices"</span><span class="token operator">:</span> ValuationDescription<span class="token punctuation">,</span>
    <span class="token string">"?branches"</span><span class="token operator">:</span> ValuationDescription<span class="token punctuation">,</span>
    <span class="token string">"?observations"</span><span class="token operator">:</span> ValuationDescription<span class="token punctuation">,</span>
    <span class="token string">"?players"</span><span class="token operator">:</span> ValuationDescription<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span> <span class="token comment">// end of IndexFile</span>

<span class="token keyword">var</span> Type <span class="token operator">=</span> <span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token string">"type"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"bool"</span><span class="token punctuation">,</span> <span class="token comment">// Boolean: 0 is false, anything else is true; default size is 1  </span>
    <span class="token string">"int"</span><span class="token punctuation">,</span> <span class="token comment">// discrete numeric; signed integer (two's complement representation); default size is 64  </span>
    <span class="token string">"uint"</span><span class="token punctuation">,</span> <span class="token comment">// discrete numeric; unsigned integer; default size is 64  </span>
    <span class="token string">"int-interval"</span><span class="token punctuation">,</span> <span class="token comment">// discrete numeric, interval; size must be a multiple of 2 (for a size/2-bit int lower bound followed by a size/2-bit int upper bound); default size is 128  </span>
    <span class="token string">"uint-interval"</span><span class="token punctuation">,</span> <span class="token comment">// discrete numeric, interval; size must be a multiple of 2 (for a size/2-bit uint lower bound followed by a size/2-bit uint upper bound); default size is 128  </span>
    <span class="token string">"double"</span><span class="token punctuation">,</span> <span class="token comment">// continuous numeric; 64-bit IEEE 754 floating-point number; size is/must always be 64  </span>
    <span class="token string">"double-interval"</span><span class="token punctuation">,</span> <span class="token comment">// continuous numeric, interval; size is/must always be 128 (for a 64-bit double lower bound followed by a 64-bit double upper bound)  </span>
    <span class="token string">"rational"</span><span class="token punctuation">,</span> <span class="token comment">// continuous numeric; size must be a multiple of 2 (for a size/2-bit int numerator followed by a size/2-bit uint denominator); default size is 128  </span>
    <span class="token string">"rational-interval"</span> <span class="token comment">// continuous numeric, interval; size must be a multiple of 4 (for a size/2-bit rational lower bound followed by a size/2-bit rational upper bound); default size is 256  </span>
    <span class="token string">"string"</span><span class="token punctuation">,</span> <span class="token comment">// size is/must always be 64 (for a uint64 index into a string mapping)  </span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"?size"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// the size, in bits, of the type; if absent, use the default size of the type  </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> AnnotationMap <span class="token operator">=</span> <span class="token function">schema</span><span class="token punctuation">(</span>Map<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token regex">/[0-9a-z_-]+/</span><span class="token punctuation">,</span> Annotation<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// maps annotation identifiers to annotations</span>

<span class="token keyword">var</span> Annotation <span class="token operator">=</span> <span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token string">"?alias"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// for referencing in external property files etc.; can be any utf-8 string, must be unique among the aliases within the same AnnotationMap element  </span>
  <span class="token string">"?description"</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// for pretty-printing/user information/etc.; can be any utf-8 string, not necessarily unique  </span>
  <span class="token string">"applies-to"</span><span class="token operator">:</span> List<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">"states"</span><span class="token punctuation">,</span> <span class="token string">"choices"</span><span class="token punctuation">,</span> <span class="token string">"branches"</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// must be non-empty  </span>
  <span class="token string">"type"</span><span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token comment">// must be of the default size (given explicitly as the value for size or implicitly by omitting size) except for types "rational" and "rational-interval", for which the size must be a positive multiple of 128 and 256, respectively  </span>
  <span class="token string">"?lower"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// lower bound for the values of the annotation, for numeric types, omit if the bound does not fit into int64  </span>
  <span class="token string">"?upper"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// upper bound for the values of the annotation, for numeric types, omit if the bound does not fit into int64  </span>
  <span class="token string">"?#strings"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// must be present iff the type of the annotation is "string" and indicates the number of strings used  </span>
  <span class="token string">"?probability-type"</span><span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token comment">// must be present iff the annotation stores distributions over values (as used in stochastic observations), with probabilities provided using this type, which must be continuous numeric and of the default size (given explicitly as the value for size or implicitly by omitting size) except for types "rational" and "rational-interval", for which the size must be a positive multiple of 128 and 256, respectively</span>
  <span class="token string">"?#probabilities"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// must be present if probability-type is present, and gives the sum of the supports of all distributions</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> ValuationDescription <span class="token operator">=</span> <span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token string">"unique"</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span> <span class="token comment">// if true, then the valuations are guaranteed to be unique (e.g. no two states are mapped to the same valuation, with equality defined on the bits for the variables, ignoring padding bits)  </span>
  <span class="token string">"?#strings"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">32</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// present iff the type of any variables in this valuation are “string” and indicates the total number of strings used  </span>
  <span class="token string">"classes"</span><span class="token operator">:</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>ValuationClassDescription<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> ValuationClassDescription <span class="token operator">=</span> <span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token comment">// the size of a state in bits is the sum of the padding and type size values of the elements plus 1 for each element where is-optional is true; this size must be a multiple of 8 (which can be ensured by adding a padding entry as necessary)  </span>
  <span class="token string">"variables"</span><span class="token operator">:</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      <span class="token string">"padding"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of bits of padding at this position  </span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token string">"name"</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token string">"?is-optional"</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span> <span class="token comment">// marks the type as an option type, using one Boolean bit preceding the value (which does not count towards size); if absent, the type is not an option type  </span>
      <span class="token string">"type"</span><span class="token operator">:</span> Type<span class="token punctuation">,</span> <span class="token comment">// must not be an interval type  </span>
      <span class="token string">"?lower"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// lower bound for the actual values of the variable, for numeric types, omit if the bound does not fit into int64  </span>
      <span class="token string">"?upper"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// upper bound for the actual values of the variable, for numeric types, omit if the bound does not fit into int64  </span>
      <span class="token string">"?offset"</span><span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">63</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// offset to add to the encoded value of the variable to obtain its actual value, for uint and int types (default 0); note that a negative offset with uint turns the type of the resulting values into int  </span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!----></pre> <hr/> <h2>Binary File Types</h2> <p>Signed integers are stored in two’s-complement representation. All multi-byte values are stored in little-endian byte order. We write <code>file[i]</code> to refer to the <code>(i+1)</code>-th byte in the file, and <code>file[i]_t</code> (where <code>t</code> is some positive number <code>b</code> or some type of size <code>b</code> bytes) to refer to the value represented by the sequence of bytes <code>file[i]</code>, …, <code>file[i+b-1]</code> in little-endian byte order.</p> <p>The UMB format uses 3 types of binary files:</p> <h3>1. CSR Mappings</h3> <p><strong>Concept:</strong> A CSR (“compressed sparse row”) file maps each index <code>i=0,...,n-1</code> to an interval <code>[l_i,u_i]</code> of target indices. The target index intervals must be sequential, with the first starting at zero, i.e. <code>l_0=0</code> and <code>u_(i-1)+1 = l_i</code> for all <code>i=1,...,n-1</code>.</p> <p><strong>Representation:</strong> A file consisting of <code>n+1</code> sequential <code>uint64</code> values, with <code>file[i]_8 = l_i</code> for <code>i&lt;n</code> and <code>file[n]_8 = u_(n-1) + 1</code>.</p> <p><strong>Default:</strong> If a specified CSR file is absent: Every applicable index <code>i</code> is mapped to <code>[i,i]</code>, unless noted otherwise.</p> <p><strong>Example:</strong> Suppose we map state indices to choice indices. If state 0 has 2 choices, state 1 has 3 choices, and state 2 has 4 choices, we store <code>0 2 5 9</code>, corresponding to intervals <code>[0,1]</code>, <code>[2,3,4]</code>, <code>[5,6,7,8]</code> of indices to the total list of 9 choices.</p> <p><strong>Notes:</strong> A CSR file stores the beginning of each interval (and the beginning of the <code>(n+1)</code>-th interval”, which indicates the end of the list). We store <code>n+1</code> elements instead of omitting the leading 0 to simplify access. In particular, the boundaries of the interval for index <code>i</code> can always be found at <code>file[i]_8</code> and <code>file[i+1]_8</code> without special treatment of the file beginning or end. The target indices are always stored as <code>uint64</code>. They denote an index in the target file w.r.t. the element type of the target file. For example, if the target file stores elements of size 128 bits, an index of 3 refers to an offset of <code>3 * 16</code> bytes.</p> <h3>2. TO1 Mappings</h3> <p><strong>Concept:</strong> A TO1 file maps each index <code>i=0,...,n-1</code> to a target value <code>v_i</code> of a specified fixed-size element type <code>t</code>.</p> <p><strong>Representation:</strong> A file consisting of <code>n</code> sequential values of type <code>t</code>, with<br/> <code>file[i]t \= v_i</code>.</p> <p><strong>Special case:</strong> <code>t = bool</code>: The file stores a single <code>n</code>-bit binary number (in little-endian byte order), with the <code>(i+1)</code>-th least significant bit being 1 if <code>v_i</code> else 0. The file consists of <code>ceil(n / 64⌉) * 8</code> bytes, with the <code>(n+1)</code>-th least significant bit and all more significant bits being 0 (padding).</p> <p><strong>Default:</strong> If a specified TO1 file is absent:  Every applicable index <code>i</code> is mapped to the equivalent of 0 in <code>t</code>, or to the least value of <code>t</code> if no equivalent of 0 exists, unless noted otherwise. If no equivalent of 0 or least value of <code>t</code> exists, then the value to assume if the file is absent must be explicitly specified.</p> <p><strong>Notes:</strong> The case of <code>t</code> \= bool means we store a bitset, where the truth value for index <code>i</code> is stored at bit <code>i</code>, with bit 0 being the least significant bit. For example, consider the following representations of state sets:</p> <ul><li>16 states, state 0 is in the set:</li></ul> <pre class="language-undefined"><!----><code class="language-undefined">Binary number: 00000000.00000001
In memory:     00000001.00000000</code><!----></pre> <ul><li>14 states, all in the set:</li></ul> <pre class="language-undefined"><!----><code class="language-undefined">Binary number: __111111.11111111
In memory:     11111111.00111111</code><!----></pre> <p>This representation means that, no matter which numeric type <code>uintx</code> is used, the truth value for index <code>i</code> is always, in C-like notation, <code>(file[floor(i/x)]_x >> (i mod x)) &amp; 1</code>.</p> <h3>3. SEQ Sequences</h3> <p><strong>Concept:</strong> A SEQ file contains a sequence of <code>n</code> values <code>v_0,...,v_(n-1)</code> of type <code>t</code> at indices <code>i_0,...,i_(n-1)</code>. Different values of type <code>t</code> can have a different size (e.g. strings). We write <code>sizeof(v)</code> for the size, in bytes, of value <code>v</code>. Let <code>b</code> be the greatest common divisor of the sizes of all values that <code>t</code> can take. Then the indices are expressed in multiples of <code>b</code>, and <code>ij = sizeof(v_0)+...+sizeof(v_(j-1))</code>.</p> <p><strong>Representation:</strong> A file consisting of <code>i_n-1 + sizeof(v_n-1)</code> bytes, with<br/> <code>file[ij * b], ..., file[ij \+ sizeof(v_j) * b] = v_j</code>.</p> <p><strong>Default:</strong> If a specified SEQ file is absent: The meaning of the absence of a certain SEQ file must be explicitly specified.</p> <p><strong>Notes:</strong> SEQ files are indexed into by CSR and TO1 files, using the multiples-of-<code>b</code> indices specified above. SEQ files are in particular used to store values for variable-width types such as strings (e.g. action label names) and arbitrary-precision rationals (e.g. rational probabilities). A rational of length <code>c</code> bits, where <code>c</code> is a multiple of 128, consists of two <code>c/2</code>-bit integers: first the numerator, then the denominator. The numerator is signed while the denominator is unsigned and must not be 0. Intervals of rationals work the same way just with 4 equal-size rational values (lower numerator, lower denominator, upper numerator, upper denominator). Rationals are indexed in terms of multiples of <code>b = 128</code>.</p> <hr/> <h2>Binary Files</h2> <p>The UMB format prescribes the binary files specified in this section.</p> <p><strong>Filenames:</strong> Files are named according to the following conventions:</p> <ul><li>CSR mapping files are named <code>source-to-targets.bin</code> (with plural <code>targets</code>).. <em>Exception: CSR mappings into byte ranges for strings use “string-mapping” for targets.</em> Examples: <code>state-to-choices.bin</code>, <code>string-mapping.bin</code></li> <li>TO1 mapping files are named source-to-target.bin (with singular target).<br/> Exception: TO1 mappings to <code>bool</code>, which are named <code>source-is-property.bin</code>.
Examples: <code>state-to-exit-rate.bin</code>, <code>state-is-initial.bin</code></li> <li>SEQ files are named after what they store, in plural form.<br/> Example: <code>strings.bin</code></li></ul> <p>If a file is in a source-specific subfolder, the mapping source is omitted in the file name, and the main TO1 mapping file is named <code>values.bin</code>. Overall, this scheme results in systematic and consistent file naming, and groups files related to the same entities when sorting by file names.</p> <h3>1. States</h3> <p><code>/state-to-choices.bin</code><br/> CSR: state -> interval(choice)<br/> <em>Can be omitted if every state has exactly one choice (due to CSR default), e.g., in DTMC and CTMC (where <code>#players = 0</code>). If present, file size must be <code>(#states + 1) * 8</code> bytes.</em></p> <p><code>/state-to-player.bin</code><br/> TO1: state -> player (type <code>uint32</code>)<br/> <em>Does not apply and must be omitted if <code>#players = 0</code>. Can be omitted if every state is controlled by player 0 (e.g. when <code>#players = 1</code>) (due to TO1 default). If present, file size must be <code>#states  * 4</code> bytes.</em></p> <p><code>/state-is-initial.bin</code><br/> TO1: state -> is initial? (type <code>bool</code>)<br/> <em>If omitted, no state is initial. If present, file size must be <code>ceil((#states / 64)) * 8</code> bytes.</em></p> <p><code>/state-is-markovian.bin</code><br/> TO1: state -> is Markovian? (type <code>bool</code>)<br/> <em>Does not apply and must be omitted unless <code>"time"</code> is <code>"urgent-stochastic"</code>. If omitted and <code>"time"</code> is <code>"urgent-stochastic"</code>, every state is mapped to false. If not Markovian, a state is probabilistic. Each Markovian state must have at most 1 choice. If present, file size must be ⌈(<code>#states</code> / 64)⌉ * 8 bytes.</em></p> <p><code>/state-to-exit-rate.bin</code><br/> TO1: state -> exit rate (type defined in <code>index.json</code>)<br/> <em>Does not apply and must be omitted if <code>"time"</code> is <code>"discrete"</code>. If <code>"time"</code> is <code>"urgent-stochastic"</code>, then the exit rates for non-Markovian states can be anything and must be ignored.</em></p> <h3>2. Choices (nondeterminism)</h3> <p><code>/choice-to-branches.bin</code><br/> CSR: choice -> interval(branch)<br/> Note: Typically absent in LTS or deterministic games.</p> <h3>3. Branches (probabilities)</h3> <p><code>/branch-to-target.bin</code><br/> TO1 mapping: branch -> state (<code>uint64</code>)<br/> <em>Note: This allows the same state-action-target triple to occur multiple times, which is intended.</em></p> <p><code>/branch-to-probability.bin</code><br/> TO1 mapping: branch -> probability (type defined in <code>index.json</code>)<br/> <em>Must be absent if <code>"branch-values"</code> is <code>"none"</code> (e.g. an LTS).</em></p> <h3>4. Action labels</h3> <p>Actions can be assigned to choices and branches. The choice actions are <code>0, ...,n-1</code> where <code>n</code> is the value of property <code>#choice-actions</code> in <code>index.json</code>. Each choice action can optionally be given a string label. This applies for branch actions analogously. Storage, described below, is as for a standard string annotation to choices/branches, except that the strings themselves can optionally be omitted.</p> <p>Choice actions are in the following files in folder <code>/actions/choices</code>:</p> <p><code>values.bin</code><br/> TO1 mapping: choice -> choice action (<code>uint32</code>)<br/> <em>Must be omitted if <code>#choice-actions = 0</code>; otherwise, if omitted, each choice is mapped to choice action 0.</em></p> <p><code>string-mapping.bin</code><br/> CSR mapping: choice action -> interval(bytes)<br/> <em>Maps into <code>strings.bin</code>. The interval must make up a valid UTF-8 string. Must be omitted if <code>#choice-actions = 0</code>; otherwise, if omitted, no string labels are provided for choice actions.</em></p> <p><code>strings.bin</code><br/> SEQ: sequence of UTF-8 strings whose bytes <code>string-mapping.bin</code> maps into<br/> <em>Must be present if and only if <code>string-mapping.bin</code> is present.</em></p> <p>Branch actions are in the following files in folder <code>/actions/branches</code>, following the same pattern as choice actions:</p> <p><code>values.bin</code><br/> TO1 mapping: branch -> branch action (uint32)<br/> <em>Must be omitted if <code>#branch-actions = 0</code>; otherwise, if omitted, each branch is mapped to branch action 0.</em></p> <p><code>string-mapping.bin</code><br/> CSR mapping: branch action -> interval(bytes)<br/> <em>Maps into <code>strings.bin</code>. The interval must make up a valid UTF-8 string. Must be omitted if <code>#branch-actions = 0</code>; otherwise, if omitted, no strings are provided for branch actions.</em></p> <p><code>strings.bin</code><br/> SEQ: sequence of UTF-8 strings whose bytes <code>string-mapping.bin</code> maps into<br/> <em>Must be present if and only if <code>string-mapping.bin</code> is present.</em></p> <h3>5. Observations</h3> <p><strong>Observations</strong> (e.g. for POMDPs) can be attached either to states (when they depend only on the target state of a transition) or to branches (when they depend on both the action taken and the target state, and optionally also the source state). They are stored in the folder <code>/observations</code> using the same notation as annotations (see below), assuming a value type of observation (uint64). For example, deterministic state-based observations would be stored as:</p> <p><code>/observations/states/values.bin</code><br/> TO1 mapping: state -> observation (<code>uint64</code>)</p> <h3>6. Annotations</h3> <p><strong>Annotations</strong> provide mappings from model entities (states, choices, branches, observations, players) to values of a specified type. Annotations are arranged in <strong>groups</strong> and each annotation has an <strong>ID</strong>, which is unique within its group. There are two pre-defined groups: <code>rewards</code> and <code>aps</code>, which are used to store a model’s rewards (continuous numeric type) and atomic propositions (Boolean type), respectively.</p> <p>An annotation is stored in folder <code>/annotations/&lt;group>/&lt;id></code> and contains one or more subfolders <code>states</code>, <code>choices</code>, <code>branches</code>, <code>observations</code> or <code>players</code>, indicating what is annotated. Annotation folders can contain the following files:</p> <p><code>values.bin</code><br/> TO1: entity -> annotation value (type defined in <code>index.json</code>)</p> <p><code>string-mapping.bin</code><br/> CSR mapping: string index -> interval of bytes in <code>strings.bin</code>.<br/> <em>The interval must make up a valid UTF-8 string. Must be present if and only if the annotation’s type is <code>string</code>.</em></p> <p><code>strings.bin</code><br/> SEQ: sequence of UTF-8 strings<br/> <em>Must be present if and only if <code>string-mapping.bin</code> is present.</em></p> <p><code>distribution-mapping.bin</code><br/> CSR mapping: entity index (<code>uint32</code> or <code>uint64</code>, depending on the object) -> annotation distribution range (<code>uint64</code>)<br/> Only relevant for stochastic annotations. Maps each entity to an interval of indices. These indices map into both <code>values.bin</code> and <code>probabilities.bin</code>, which should be of equal size (equal to the sum of the size of the supports for all distributions). If omitted, 1:1 mapping, so each entity corresponds to a Dirac distribution, i.e., a single value.</p> <p><code>probabilities.bin</code><br/> TO1 mapping: annotation distribution index (<code>uint64</code>) -> probability<br/> If omitted, everything maps to 1. Should be omitted if <code>distributions.bin</code> is not present.</p> <h3>7. Valuations</h3> <p><strong>Valuations</strong> provide optional, more detailed representations for model entities (states, choices, branches, observations or players). A valuation consists of the values for a set of <strong>variables</strong>, with the values of each variable being from the domain of some specified type. A set of such variables and their types is called a <strong>valuation class</strong>. A valuation can use multiple valuation classes, which are defined in <code>ValuationClassDescription</code> elements in <code>index.json</code>; for each kind of entity (states, choices, …), a list of valuation classes is given, and each entity’s valuation can conform to a different valuation class. Each valuation of the same class is of the same size, which can be derived from the corresponding <code>ValuationClassDescription</code> element in <code>index.json</code>.</p> <p>Let <code>&lt;entity></code> be the entity kind: <code>states</code>, <code>choices</code>, <code>branches</code>, <code>observations</code> or <code>players</code>. The valuations for one entity kind are stored in folder <code>/valuations/&lt;entity></code>, containing the following files:</p> <p><code>valuations.bin</code> SEQ: sequence of valuations<br/> <em>There must be one valuation for each entity.</em></p> <p><code>valuation-to-class.bin</code><br/> TO1: entity -> index of valuation class (<code>uint32</code>)<br/> <em>Maps every entity to the index of the valuation class of that one entity’s valuation. Note that different classes have different sizes, so if this file is present, tools may need to compute the offsets of the entries in valuations.bin in a linear pass over this file. If absent, then every entity of this kind is mapped to the first valuation description of the corresponding element of <code>valuations</code> in <code>index.json</code> and <code>valuations.bin</code> is in fact a TO1 mapping.</em></p> <p><code>string-mapping.bin</code><br/> CSR mapping: string index -> interval of bytes in strings.bin<br/> <em>Must make up a valid UTF-8 string. Must be omitted if there are no string-valued variables in state valuations.</em></p> <p><code>strings.bin</code><br/> SEQ: sequence of UTF-8 strings<br/> <em>Must be present iff string-mapping.bin is present.</em></p> <h4>Encoding of valuations and variable values</h4> <p>File <code>valuations.bin</code> contains one state valuation per entity, each of which internally consists of a sequence of variable values and padding bits, bit-packed into a large binary number in the order of the entries in the “variables” element (i.e. the first variable value/padding occupies the least significant bits) and written to file in little-endian byte order. The internal structure is described by <code>valuations</code> in <code>index.json</code>.</p> <p><strong>Example 1:</strong> Four variables <code>v0</code>, <code>v1</code>, <code>v2</code> and <code>v3</code>, bit-packed, with <code>v1</code> being optional, with types as given in the valuation class definition below, and the string  list <code>["xyz","ab","c"</code> (used by variable <code>v2</code>).</p> <pre class="language-javascript"><!----><code class="language-javascript">   <span class="token punctuation">&#123;</span>
     <span class="token string">"variables"</span><span class="token operator">:</span>
     <span class="token punctuation">[</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"v0"</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"bool"</span><span class="token punctuation">,</span> <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"v1"</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"uint"</span><span class="token punctuation">,</span> <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">"is-optional"</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"padding"</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"v2"</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span> <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">64</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"v3"</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"bool"</span><span class="token punctuation">,</span> <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"padding"</span><span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">&#125;</span>
     <span class="token punctuation">]</span>
   <span class="token punctuation">&#125;</span></code><!----></pre> <p>Total encoding size: 88 bits \= 11 bytes
Example values: <code>v0 = true</code>, <code>v1 = Some(27)</code>, <code>v2 = "ab"</code>, <code>v3 = true</code> Binary-encoded values: <code>v0 = 01</code>, <code>v1 = 1011011</code>, <code>v2 = 00...001</code>, <code>v3 = 001</code> Binary number, including padding, marked as <code>_</code>:</p> <pre class="language-undefined"><!----><code class="language-undefined">_______.0 01.000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 01._____.1 011011.01</code><!----></pre> <p>File <code>valuations.bin:</code> in little-endian byte order:</p> <pre class="language-undefined"><!----><code class="language-undefined">01101101 01000001 00000000 00000000 00000000 00000000 00000000 00000000 00000000 01000000 00000000</code><!----></pre> <p>File <code>string-mapping.bin</code>: <code>[0 3 5 6]</code> File <code>strings.bin</code>: <code>xyzabc</code></p> <p><strong>Example 2:</strong> C-like byte-packed <code>struct { uint8 sv0, int16 sv1 }</code> with offset for <code>sv0</code> that allows values -128 to 127 to be represented by <code>sv0</code></p> <pre class="language-javascript"><!----><code class="language-javascript"><span class="token punctuation">&#123;</span>
     <span class="token string">"variables"</span><span class="token operator">:</span>
     <span class="token punctuation">[</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sv0"</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"uint"</span><span class="token punctuation">,</span> <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">"offset"</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">128</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
       <span class="token punctuation">&#123;</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sv1"</span><span class="token punctuation">,</span> <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"int"</span><span class="token punctuation">,</span> <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">&#125;</span>
     <span class="token punctuation">]</span>
   <span class="token punctuation">&#125;</span></code><!----></pre> <p>Total encoding size: 24 bits \= 3 bytes
Example values: <code>sv0 = 56</code> (encoded as 56 - (-128) \= 184), <code>sv1 = -16897</code> Binary-encoded values: <code>sv0 = 10111000</code>, <code>sv1 = 1011110111111111</code> Binary number:</p> <pre class="language-undefined"><!----><code class="language-undefined">10111101 11111111.10111000</code><!----></pre> <p>File <code>valuations.bin:</code> in little-endian byte order:</p> <pre class="language-undefined"><!----><code class="language-undefined">10111000 11111111 10111101 </code><!----></pre> <p>Note that the in-file representation matches the typical little-endian in-memory representation of the struct in e.g. C here.</p><!----></div></article></div><!----><!----> <footer class="svelte-9sff3o"><p>The UMB standard is an open probabilistic model checking standard for explicit representation of DTMCs, CTMCs, MDPs, POMDPs, etc. Any tool is free to implement the standard, and we encourage its adoption. The authors of this standard would like to acknowlege the <a href="https://www.dagstuhl.de/">Schloss Dagstuhl</a> venue, where the idea for UMB and UMBI was initially concieved.</p> <p>This website was designed and is maintained by <a href="https://jeppson.dev">Josh Jeppson</a>. It is licensed under the GPLv3, and its source code is available on <a href="https://github.com/pmc-dev/umb">GitHub</a>.</p></footer><!----><!----><!--]--> <!--[!--><!--]--><!--]-->

			<script>
				{
					__sveltekit_ofn54h = {
						base: new URL(".", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("./_app/immutable/entry/start.YitcgU9W.js"),
						import("./_app/immutable/entry/app.BJPbCFXA.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
